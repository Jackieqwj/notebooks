# Quick start with OceanBase vector search using SQL

OceanBase supports efficient vector search directly with SQL. This guide will help you get started in just a few steps.

OceanBase Database's vector search is built for multi-modal integration, offering unified queries, scalability, high performance, high availability, low cost, multi-tenancy, and data security. For more details, see the [Overview of vector search](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001976351).

<main id="notice" type='notice'>
  <h4>Note</h4>
  <p>This tutorial uses MySQL-compatible mode as an example.</p>
</main>

## Procedures

### Step 1: Connect to the database

Use the following command to connect to the database:

```shell
obclient -h127.0.0.1 -P2881 -uroot@mysql_tenant -A -Dtest
```

### Step 2: Create a vector table

When creating a table, use the `VECTOR(dim)` data type to declare a vector column and specify its dimension. You will also need to create a vector index on this column, specifying at least the `type` and `distance` parameters.

This example creates a vector column called `embedding` with dimension `3`, and adds an HNSW index using `L2` distance:

```sql
CREATE TABLE t1( id INT PRIMARY KEY, doc VARCHAR(200), embedding VECTOR(3), VECTOR INDEX idx1(embedding) WITH (distance=L2, type=hnsw) );
```

For large datasets, it is recommended to import data first and then create the vector index. For details about creating indexes after data import, see [Create a vector index](https://en.oceanbase.com/docs/common-oceanbase-database-10000000002440117).

### Step 3: Insert vector data

To simulate a vector search scenario, we need to construct some vector data first. Each row of data includes a description and its corresponding vector. In this example, we assume that `'Apple'` corresponds to the vector `'[1.2,0.7,1.1]'`, and `'Carrot'` corresponds to the vector `'[5.3,4.8,5.4]'`, and so on.

```sql
INSERT INTO t1 VALUES (1, 'Apple', '[1.2,0.7,1.1]'), (2, 'Banana', '[0.6,1.2,0.8]'), (3, 'Orange','[1.1,1.1,0.9]'), (4, 'Carrot', '[5.3,4.8,5.4]'), (5, 'Spinach', '[4.9,5.3,4.8]'), (6, 'Tomato','[5.2,4.9,5.1]');
```

For demonstration purposes, this example simplifies the vector dimensions to only 3 dimensions, and the vectors are manually generated. In real-world applications, you need to use embedding models to generate vectors from actual text, and the dimensions can reach hundreds or thousands.

You can query the table data to verify that the data was inserted successfully.

```sql
SELECT * FROM t1;
```

Expected output:

```shell
+----+---------+---------------+
| id | doc     | embedding     |
+----+---------+---------------+
|  1 | Apple   | [1.2,0.7,1.1] |
|  2 | Banana  | [0.6,1.2,0.8] |
|  3 | Orange  | [1.1,1.1,0.9] |
|  4 | Carrot  | [5.3,4.8,5.4] |
|  5 | Spinach | [4.9,5.3,4.8] |
|  6 | Tomato  | [5.2,4.9,5.1] |
+----+---------+---------------+
6 rows in set
```

### Step 4: Perform a vector search

To perform vector search, you need to provide a vector as the search condition. Suppose we want to find all `'fruits'`, and the corresponding vector is `[0.9, 1.0, 0.9]`. The SQL statement would be:

```sql
SELECT id, doc FROM t1 ORDER BY l2_distance(embedding, '[0.9, 1.0, 0.9]') APPROXIMATE LIMIT 3;
```

Expected output:

```shell
+----+--------+
| id | doc    |
+----+--------+
|  3 | Orange |
|  2 | Banana |
|  1 | Apple  |
+----+--------+
3 rows in set
```

You are now ready to use OceanBase vector search with SQL. For more advanced scenarios, refer to the official documentation or explore embedding models for generating vectors from real-world data.